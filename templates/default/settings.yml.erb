# staleness and batch_time_interval are durations, you can use ERB such as <%%= 2.hours %>
#
# source: staleness can be integer or array with up to 4 integer elements:
# 1: for all articles
# 2: for articles up to 7 days old, for all other articles
# 3: for articles up to 7 days old, up to 31 days old, for all other articles
# 4: for articles up to 7 days old, up to 31 days old, up to 1 year old, for all other articles

defaults: &defaults
  useragent: <%= node[:app][:useragent] %>
  notification_email: <%= node[:admin][:email] %>
  rest_auth_site_key: <%= node[:app][:key] %>
  rest_auth_digest_stretches: 10
  session_secret: <%= node[:app][:secret] %>
  layout: <%= node[:app][:layout] %>
  couchdb_url: http://<%= node[:couchdb][:host] %>:<%= node[:couchdb][:port] %>/<%= node[:couchdb][:database] %>/
  doi_prefix: <%= node[:app][:doi_prefix] %>
  uid: <%= node[:app][:uid] %>
  source:
    job_batch_size: 200
    staleness: [ <%%= 1.day %>, <%%= 1.day %>, <%%= 1.month %>, <%%= 1.month %> ]
    batch_time_interval: <%%= 1.hour %>
<% if node[:app][:seed_additional_sources] %>
  nature:
    requests_per_day: 5000
<% end %>

development:
  <<: *defaults
  hostname: http://dev.example.org 

test:
  <<: *defaults
  hostname: http://test.example.org
  couchdb_url: http://<%= node[:couchdb][:host] %>:<%= node[:couchdb][:port] %>/<%= node[:couchdb][:database] %>_test/
  
production:
  <<: *defaults
  hostname: http://alm.example.org 
