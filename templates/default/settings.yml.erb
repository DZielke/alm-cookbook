defaults: &defaults
  useragent: <%= node[:alm][:useragent] %>
  api_key: <%= node[:alm][:api_key] %>
  notification_email: <%= node[:alm][:admin][:email] %>
  rest_auth_site_key: <%= node[:alm][:key] %>
  rest_auth_digest_stretches: 10
  secret_token: <%= node[:alm][:secret] %>
  cas_url: <%= node[:alm][:cas_url] %>
  cas_login_url: /cas/login
  cas_logout_url: /cas/logout
  cas_service_validate_url: /cas/serviceValidate
  github_client_id: <%= node[:alm][:github_client_id] %>
  github_client_secret: <%= node[:alm][:github_client_secret] %>
  persona: <%= node[:alm][:persona] %>
  couchdb_url: http://<%= node[:alm][:host] %>:<%= node[:couch_db][:config][:httpd][:port] %>/<%= node[:alm][:name] %>/
  doi_prefix: <%= node[:alm][:doi_prefix] %>
  uid: <%= node[:alm][:uid] %>
  mail:
    address: <%= node[:alm][:mail][:address] %>
    port: <%= node[:alm][:mail][:port] %>
    domain: <%= node[:alm][:mail][:domain] %>

development:
  <<: *defaults
  hostname: <%= node[:alm][:hostname] %>

test:
  <<: *defaults
  hostname: <%= node[:alm][:hostname] %>
  cas_url: <%= node[:alm][:cas_url] %>
  cas_login_url: /cas/login
  cas_logout_url: /cas/logout
  cas_service_validate_url: /cas/serviceValidate
  github_client_id: <%= node[:alm][:github_client_id] %>
  github_client_secret: <%= node[:alm][:github_client_secret] %>
  persona: <%= node[:alm][:persona] %>
  couchdb_url: http://<%= node[:alm][:host] %>:<%= node[:couch_db][:config][:httpd][:port] %>/<%= node[:alm][:name] %>_test/
  doi_prefix: 10.1371

production:
  <<: *defaults
  hostname: <%= node[:alm][:hostname] %>
